{"remainingRequest":"F:\\html\\123\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\html\\123\\src\\components\\World.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\html\\123\\src\\components\\World.vue","mtime":1648174132637},{"path":"F:\\html\\123\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\html\\123\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\html\\123\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\html\\123\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KDQppbXBvcnQgKiBhcyBUSFJFRSBmcm9tICJ0aHJlZSI7DQovLyBpbXBvcnQgeyBPcmJpdENvbnRyb2xzIH0gZnJvbSAidGhyZWUvZXhhbXBsZXMvanNtL2NvbnRyb2xzL09yYml0Q29udHJvbHMiOw0KaW1wb3J0IHsgT0JKTG9hZGVyIH0gZnJvbSAidGhyZWUvZXhhbXBsZXMvanNtL2xvYWRlcnMvT0JKTG9hZGVyIjsNCmltcG9ydCB7IFRyYWNrYmFsbENvbnRyb2xzIH0gZnJvbSAidGhyZWUvZXhhbXBsZXMvanNtL2NvbnRyb2xzL1RyYWNrYmFsbENvbnRyb2xzIjsNCmltcG9ydCBSQUZNYW5hZ2VyIGZyb20gInJhZi1tYW5hZ2VyIjsNCmltcG9ydCBSb2NrcyBmcm9tICIuL1JvY2tzIjsNCmltcG9ydCBBbGJ1bSBmcm9tICIuL0FsYnVtIjsNCmltcG9ydCBNb3VzZSBmcm9tICIuL01vdXNlIjsNCmltcG9ydCBGb2xsb3dFZmZlY3QgZnJvbSAiLi9Gb2xsb3dFZmZlY3QiOw0KaW1wb3J0IHRleHR1cmUgZnJvbSAiLi4vYXNzZXRzL2RvdC5wbmciOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJXb3JsZCIsDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5pbml0VGhyZWUoKTsNCiAgICB0aGlzLmFkZExpZ2h0KCk7DQogICAgdGhpcy5hZGRCYWNrUm9ja3MoKTsNCiAgICB0aGlzLmFkZEFsYnVtKCk7DQogICAgdGhpcy5hZGRNb3VzZUFuZEVmZmVjdCgpOw0KDQogICAgdGhpcy5hZGRNb2RlbHMoKTsNCg0KICAgIHRoaXMucmVuZGVyID0gdGhpcy5yZW5kZXIuYmluZCh0aGlzKTsNCiAgICBSQUZNYW5hZ2VyLmFkZCh0aGlzLnJlbmRlcik7DQogIH0sDQogIGRlc3Ryb3llZCgpIHsNCiAgICBSQUZNYW5hZ2VyLnJlbW92ZSh0aGlzLnJlbmRlcik7DQogIH0sDQoNCiAgbWV0aG9kczogew0KICAgIGluaXRUaHJlZTogZnVuY3Rpb24gKCkgew0KICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy4kcmVmcy5jb250YWluZXI7DQogICAgICBjb25zdCBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoDQogICAgICAgIDQ1LA0KICAgICAgICBjb250YWluZXIub2Zmc2V0V2lkdGggLyBjb250YWluZXIub2Zmc2V0SGVpZ2h0LA0KICAgICAgICAxLA0KICAgICAgICAzMDAwDQogICAgICApOw0KDQogICAgICBjYW1lcmEucG9zaXRpb24uc2V0KDAsIDAsIDUwMCk7DQoNCiAgICAgIGNvbnN0IHNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7DQogICAgICBjb25zdCByZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKHsgYWxwaGE6IHRydWUgfSk7DQogICAgICByZW5kZXJlci5zZXRQaXhlbFJhdGlvKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTsNCiAgICAgIHJlbmRlcmVyLnNldFNpemUoY29udGFpbmVyLm9mZnNldFdpZHRoLCBjb250YWluZXIub2Zmc2V0SGVpZ2h0KTsNCiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyZW5kZXJlci5kb21FbGVtZW50KTsNCiAgICAgIHJlbmRlcmVyLnNldENsZWFyQ29sb3IoMHgwMDAwMDAsIDApOw0KICAgICAgY29uc3QgY2xvY2sgPSBuZXcgVEhSRUUuQ2xvY2soKTsNCg0KICAgICAgdGhpcy5jbG9jayA9IGNsb2NrOw0KICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lOw0KICAgICAgdGhpcy5jYW1lcmEgPSBjYW1lcmE7DQogICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7DQogICAgfSwNCg0KICAgIGFkZExpZ2h0OiBmdW5jdGlvbiAoKSB7DQogICAgICBjb25zdCB7IHNjZW5lIH0gPSB0aGlzOw0KDQogICAgICBjb25zdCBoZW1pTGlnaHQgPSBuZXcgVEhSRUUuSGVtaXNwaGVyZUxpZ2h0KDB4ZmZmZmZmLCAweDQ0NDQ0NCk7DQogICAgICBoZW1pTGlnaHQucG9zaXRpb24uc2V0KDAsIDEwMDAsIDApOw0KICAgICAgc2NlbmUuYWRkKGhlbWlMaWdodCk7DQoNCiAgICAgIGNvbnN0IGRpckxpZ2h0ID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoMHhmZmZmZmYsIDAuOCk7DQogICAgICBkaXJMaWdodC5wb3NpdGlvbi5zZXQoLTMwMDAsIDEwMDAsIC0xMDAwKTsNCiAgICAgIHNjZW5lLmFkZChkaXJMaWdodCk7DQogICAgfSwNCg0KICAgIGFkZEJhY2tSb2NrczogZnVuY3Rpb24gKCkgew0KICAgICAgY29uc3QgeyBzY2VuZSB9ID0gdGhpczsNCiAgICAgIGNvbnN0IHJvY2tzID0gbmV3IFJvY2tzKCk7DQogICAgICByb2Nrcy5hZGRUb1NjZW5lKHNjZW5lKTsNCiAgICAgIHRoaXMucm9ja3MgPSByb2NrczsNCiAgICB9LA0KDQogICAgYWRkTW9kZWxzOiBmdW5jdGlvbiAoKSB7DQogICAgICBsZXQgeyBzY2VuZSB9ID0gdGhpczsNCiAgICAgIC8v5a+85YWlb2Jq5qih5Z6LDQogICAgICB2YXIgb2JqTG9hZGVyID0gbmV3IE9CSkxvYWRlcigpOw0KICAgICAgb2JqTG9hZGVyLmxvYWQoIi4uL21vZGVscy9QbGFuZS5vYmoiLCBmdW5jdGlvbiAob2JqZWN0KSB7DQogICAgICAgIGNvbnNvbGUubG9nKG9iamVjdCk7DQogICAgICAgIC8v6K6+572u5qih5Z6L57yp5pS+5q+U5L6LDQogICAgICAgIG9iamVjdC5zY2FsZS5zZXQoMTAsIDEwLCAxMCk7DQogICAgICAgIC8v6K6+572u5qih5Z6L55qE5Z2Q5qCHDQogICAgICAgIG9iamVjdC5wb3NpdGlvbi5zZXQoMCwgMCwgMCk7DQoNCiAgICAgICAgb2JqZWN0LnRyYXZlcnNlKGZ1bmN0aW9uIChjaGlsZCkgew0KICAgICAgICAgIGlmIChjaGlsZCBpbnN0YW5jZW9mIFRIUkVFLk1lc2gpIHsNCiAgICAgICAgICAgIC8v6K6+572u5qih5Z6L55qu6IKkDQogICAgICAgICAgICBjaGlsZC5tYXRlcmlhbC5tYXAgPSBUSFJFRS5JbWFnZVV0aWxzLmxvYWRUZXh0dXJlKA0KICAgICAgICAgICAgICAiLi4vbW9kZWxzL0pldF9CYXNlQ29sb3IucG5nIg0KICAgICAgICAgICAgKTsNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgICAvL+WwhuaooeWei+a3u+WKoOWIsOWcuuaZr+S4rQ0KICAgICAgICBzY2VuZS5hZGQob2JqZWN0KTsNCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICBhZGRBbGJ1bTogZnVuY3Rpb24gKCkgew0KICAgICAgY29uc3QgeyBzY2VuZSwgY2FtZXJhLCByZW5kZXJlciB9ID0gdGhpczsNCiAgICAgIGNvbnN0IGFsYnVtID0gbmV3IEFsYnVtKHsgY2FtZXJhLCByZW5kZXJlciB9KTsNCiAgICAgIGFsYnVtLmFkZFRvU2NlbmUoc2NlbmUpOw0KICAgICAgdGhpcy5hbGJ1bSA9IGFsYnVtOw0KICAgIH0sDQoNCiAgICBhZGRNb3VzZUFuZEVmZmVjdDogZnVuY3Rpb24gKCkgew0KICAgICAgY29uc3QgeyBzY2VuZSwgcmVuZGVyZXIsIGNhbWVyYSwgYWxidW0gfSA9IHRoaXM7DQogICAgICBjb25zdCBmb2xsb3cgPSBuZXcgRm9sbG93RWZmZWN0KHsNCiAgICAgICAgdGV4dHVyZSwNCiAgICAgICAgcmVuZGVyZXIsDQogICAgICAgIGNhbWVyYSwNCiAgICAgICAgc2NlbmUsDQogICAgICB9KTsNCg0KICAgICAgbmV3IE1vdXNlKHsgZGlzcGxheTogYWxidW0uZGlzcGxheSwgY2FtZXJhLCByZW5kZXJlciB9KTsNCg0KICAgICAgdGhpcy5mb2xsb3cgPSBmb2xsb3c7DQogICAgfSwNCg0KICAgIHJlbmRlcjogZnVuY3Rpb24gKCkgew0KICAgICAgY29uc3QgeyByZW5kZXJlciwgc2NlbmUsIGNhbWVyYSwgcm9ja3MsIGNsb2NrLCBmb2xsb3cgfSA9IHRoaXM7DQogICAgICB2YXIgY29udHJvbHMgPSBuZXcgVHJhY2tiYWxsQ29udHJvbHMoY2FtZXJhLCByZW5kZXJlci5kb21FbGVtZW50KTsNCiAgICAgIC8vIC8vIOS9v+WKqOeUu+W+queOr+S9v+eUqOaXtumYu+WwvOaIluiHqui9rCDmhI/mgJ3mmK/lkKbmnInmg6/mgKcNCiAgICAgIGNvbnRyb2xzLnJvdGF0ZVNwZWVkID0gMC4xOyAvLyDml4vovazpgJ/luqYNCiAgICAgIGNvbnRyb2xzLnpvb21TcGVlZCA9IDAuMTsgLy8g57yp5pS+6YCf5bqmDQogICAgICBjb250cm9scy5taW5EaXN0YW5jZSA9IDIwMDsgLy/nvKnmlL7nmoTmnIDov5Hot53nprsNCiAgICAgIGNvbnRyb2xzLm1heERpc3RhbmNlID0gODAwOyAvL+e8qeaUvueahOacgOi/nOi3neemuw0KICAgICAgY29udHJvbHMucGFuU3BlZWQgPSAwLjE7IC8vIOW5s2NvbnRyb2xzDQogICAgICBjb250cm9scy51cGRhdGUoKTsNCiAgICAgIGZvbGxvdy5yZW5kZXIoKTsNCiAgICAgIHJvY2tzLnJlbmRlcihjbG9jayk7DQogICAgICByZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSk7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["World.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"World.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"world\" ref=\"container\"></div>\r\n</template>\r\n\r\n<script>\r\nimport * as THREE from \"three\";\r\n// import { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\nimport { OBJLoader } from \"three/examples/jsm/loaders/OBJLoader\";\r\nimport { TrackballControls } from \"three/examples/jsm/controls/TrackballControls\";\r\nimport RAFManager from \"raf-manager\";\r\nimport Rocks from \"./Rocks\";\r\nimport Album from \"./Album\";\r\nimport Mouse from \"./Mouse\";\r\nimport FollowEffect from \"./FollowEffect\";\r\nimport texture from \"../assets/dot.png\";\r\n\r\nexport default {\r\n  name: \"World\",\r\n  mounted() {\r\n    this.initThree();\r\n    this.addLight();\r\n    this.addBackRocks();\r\n    this.addAlbum();\r\n    this.addMouseAndEffect();\r\n\r\n    this.addModels();\r\n\r\n    this.render = this.render.bind(this);\r\n    RAFManager.add(this.render);\r\n  },\r\n  destroyed() {\r\n    RAFManager.remove(this.render);\r\n  },\r\n\r\n  methods: {\r\n    initThree: function () {\r\n      const container = this.$refs.container;\r\n      const camera = new THREE.PerspectiveCamera(\r\n        45,\r\n        container.offsetWidth / container.offsetHeight,\r\n        1,\r\n        3000\r\n      );\r\n\r\n      camera.position.set(0, 0, 500);\r\n\r\n      const scene = new THREE.Scene();\r\n      const renderer = new THREE.WebGLRenderer({ alpha: true });\r\n      renderer.setPixelRatio(window.devicePixelRatio);\r\n      renderer.setSize(container.offsetWidth, container.offsetHeight);\r\n      container.appendChild(renderer.domElement);\r\n      renderer.setClearColor(0x000000, 0);\r\n      const clock = new THREE.Clock();\r\n\r\n      this.clock = clock;\r\n      this.scene = scene;\r\n      this.camera = camera;\r\n      this.renderer = renderer;\r\n    },\r\n\r\n    addLight: function () {\r\n      const { scene } = this;\r\n\r\n      const hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444);\r\n      hemiLight.position.set(0, 1000, 0);\r\n      scene.add(hemiLight);\r\n\r\n      const dirLight = new THREE.DirectionalLight(0xffffff, 0.8);\r\n      dirLight.position.set(-3000, 1000, -1000);\r\n      scene.add(dirLight);\r\n    },\r\n\r\n    addBackRocks: function () {\r\n      const { scene } = this;\r\n      const rocks = new Rocks();\r\n      rocks.addToScene(scene);\r\n      this.rocks = rocks;\r\n    },\r\n\r\n    addModels: function () {\r\n      let { scene } = this;\r\n      //导入obj模型\r\n      var objLoader = new OBJLoader();\r\n      objLoader.load(\"../models/Plane.obj\", function (object) {\r\n        console.log(object);\r\n        //设置模型缩放比例\r\n        object.scale.set(10, 10, 10);\r\n        //设置模型的坐标\r\n        object.position.set(0, 0, 0);\r\n\r\n        object.traverse(function (child) {\r\n          if (child instanceof THREE.Mesh) {\r\n            //设置模型皮肤\r\n            child.material.map = THREE.ImageUtils.loadTexture(\r\n              \"../models/Jet_BaseColor.png\"\r\n            );\r\n          }\r\n        });\r\n        //将模型添加到场景中\r\n        scene.add(object);\r\n      });\r\n    },\r\n\r\n    addAlbum: function () {\r\n      const { scene, camera, renderer } = this;\r\n      const album = new Album({ camera, renderer });\r\n      album.addToScene(scene);\r\n      this.album = album;\r\n    },\r\n\r\n    addMouseAndEffect: function () {\r\n      const { scene, renderer, camera, album } = this;\r\n      const follow = new FollowEffect({\r\n        texture,\r\n        renderer,\r\n        camera,\r\n        scene,\r\n      });\r\n\r\n      new Mouse({ display: album.display, camera, renderer });\r\n\r\n      this.follow = follow;\r\n    },\r\n\r\n    render: function () {\r\n      const { renderer, scene, camera, rocks, clock, follow } = this;\r\n      var controls = new TrackballControls(camera, renderer.domElement);\r\n      // // 使动画循环使用时阻尼或自转 意思是否有惯性\r\n      controls.rotateSpeed = 0.1; // 旋转速度\r\n      controls.zoomSpeed = 0.1; // 缩放速度\r\n      controls.minDistance = 200; //缩放的最近距离\r\n      controls.maxDistance = 800; //缩放的最远距离\r\n      controls.panSpeed = 0.1; // 平controls\r\n      controls.update();\r\n      follow.render();\r\n      rocks.render(clock);\r\n      renderer.render(scene, camera);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n.world {\r\n  position: absolute;\r\n  bottom: 0;\r\n  margin: 0;\r\n  padding: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #161616;\r\n  background-image: radial-gradient(#161616, #000);\r\n}\r\n</style>\r\n"]}]}