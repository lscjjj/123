{"remainingRequest":"F:\\html\\123\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\html\\123\\src\\components\\World.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\html\\123\\src\\components\\World.vue","mtime":1648091627916},{"path":"F:\\html\\123\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\html\\123\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\html\\123\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\html\\123\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KDQppbXBvcnQgKiBhcyBUSFJFRSBmcm9tICJ0aHJlZSI7DQovLyBpbXBvcnQgeyBPcmJpdENvbnRyb2xzIH0gZnJvbSAidGhyZWUvZXhhbXBsZXMvanNtL2NvbnRyb2xzL09yYml0Q29udHJvbHMiOw0KaW1wb3J0IHsgT0JKTG9hZGVyIH0gZnJvbSAidGhyZWUvZXhhbXBsZXMvanNtL2xvYWRlcnMvT0JKTG9hZGVyIjsNCmltcG9ydCBSQUZNYW5hZ2VyIGZyb20gInJhZi1tYW5hZ2VyIjsNCmltcG9ydCBSb2NrcyBmcm9tICIuL1JvY2tzIjsNCmltcG9ydCBBbGJ1bSBmcm9tICIuL0FsYnVtIjsNCmltcG9ydCBNb3VzZSBmcm9tICIuL01vdXNlIjsNCmltcG9ydCBGb2xsb3dFZmZlY3QgZnJvbSAiLi9Gb2xsb3dFZmZlY3QiOw0KaW1wb3J0IHRleHR1cmUgZnJvbSAiLi4vYXNzZXRzL2RvdC5wbmciOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJXb3JsZCIsDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5pbml0VGhyZWUoKTsNCiAgICB0aGlzLmFkZExpZ2h0KCk7DQogICAgdGhpcy5hZGRCYWNrUm9ja3MoKTsNCiAgICB0aGlzLmFkZEFsYnVtKCk7DQogICAgdGhpcy5hZGRNb3VzZUFuZEVmZmVjdCgpOw0KDQogICAgdGhpcy5hZGRNb2RlbHMoKTsNCg0KICAgIHRoaXMucmVuZGVyID0gdGhpcy5yZW5kZXIuYmluZCh0aGlzKTsNCiAgICBSQUZNYW5hZ2VyLmFkZCh0aGlzLnJlbmRlcik7DQogIH0sDQogIGRlc3Ryb3llZCgpIHsNCiAgICBSQUZNYW5hZ2VyLnJlbW92ZSh0aGlzLnJlbmRlcik7DQogIH0sDQoNCiAgbWV0aG9kczogew0KICAgIGluaXRUaHJlZTogZnVuY3Rpb24gKCkgew0KICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy4kcmVmcy5jb250YWluZXI7DQogICAgICBjb25zdCBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoDQogICAgICAgIDQ1LA0KICAgICAgICBjb250YWluZXIub2Zmc2V0V2lkdGggLyBjb250YWluZXIub2Zmc2V0SGVpZ2h0LA0KICAgICAgICAxLA0KICAgICAgICAzMDAwDQogICAgICApOw0KICAgICAgIA0KICAgICAgY2FtZXJhLnBvc2l0aW9uLnNldCgwLCAwLCA1MDApOw0KDQoNCiAgICAgIGNvbnN0IHNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7DQogICAgICBjb25zdCByZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKHsgYWxwaGE6IHRydWUgfSk7DQogICAgICByZW5kZXJlci5zZXRQaXhlbFJhdGlvKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTsNCiAgICAgIHJlbmRlcmVyLnNldFNpemUoY29udGFpbmVyLm9mZnNldFdpZHRoLCBjb250YWluZXIub2Zmc2V0SGVpZ2h0KTsNCiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyZW5kZXJlci5kb21FbGVtZW50KTsNCiAgICAgIHJlbmRlcmVyLnNldENsZWFyQ29sb3IoMHgwMDAwMDAsIDApOw0KICAgICAgY29uc3QgY2xvY2sgPSBuZXcgVEhSRUUuQ2xvY2soKTsNCg0KICAgICAgdGhpcy5jbG9jayA9IGNsb2NrOw0KICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lOw0KICAgICAgdGhpcy5jYW1lcmEgPSBjYW1lcmE7DQogICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7DQogICAgfSwNCg0KICAgIGFkZExpZ2h0OiBmdW5jdGlvbiAoKSB7DQogICAgICBjb25zdCB7IHNjZW5lIH0gPSB0aGlzOw0KDQogICAgICBjb25zdCBoZW1pTGlnaHQgPSBuZXcgVEhSRUUuSGVtaXNwaGVyZUxpZ2h0KDB4ZmZmZmZmLCAweDQ0NDQ0NCk7DQogICAgICBoZW1pTGlnaHQucG9zaXRpb24uc2V0KDAsIDEwMDAsIDApOw0KICAgICAgc2NlbmUuYWRkKGhlbWlMaWdodCk7DQoNCiAgICAgIGNvbnN0IGRpckxpZ2h0ID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoMHhmZmZmZmYsIDAuOCk7DQogICAgICBkaXJMaWdodC5wb3NpdGlvbi5zZXQoLTMwMDAsIDEwMDAsIC0xMDAwKTsNCiAgICAgIHNjZW5lLmFkZChkaXJMaWdodCk7DQogICAgfSwNCg0KICAgIGFkZEJhY2tSb2NrczogZnVuY3Rpb24gKCkgew0KICAgICAgY29uc3QgeyBzY2VuZSB9ID0gdGhpczsNCiAgICAgIGNvbnN0IHJvY2tzID0gbmV3IFJvY2tzKCk7DQogICAgICByb2Nrcy5hZGRUb1NjZW5lKHNjZW5lKTsNCiAgICAgIHRoaXMucm9ja3MgPSByb2NrczsNCiAgICB9LA0KDQogICAgYWRkTW9kZWxzOiBmdW5jdGlvbiAoKSB7DQogICAgICBsZXQgeyBzY2VuZSB9ID0gdGhpczsNCiAgICAgIC8v5a+85YWlb2Jq5qih5Z6LDQogICAgICAgIHZhciBvYmpMb2FkZXIgPSBuZXcgT0JKTG9hZGVyKCk7DQogICAgICAgIG9iakxvYWRlci5sb2FkKCcuLi9tb2RlbHMvUGxhbmUub2JqJywgZnVuY3Rpb24gKG9iamVjdCkgew0KICAgICAgICAgICAgY29uc29sZS5sb2cob2JqZWN0KQ0KICAgICAgICAgICAgLy/orr7nva7mqKHlnovnvKnmlL7mr5TkvosNCiAgICAgICAgICAgIG9iamVjdC5zY2FsZS5zZXQoMSwgMSwgMSk7DQogICAgICAgICAgICAvL+iuvue9ruaooeWei+eahOWdkOaghw0KICAgICAgICAgICAgb2JqZWN0LnBvc2l0aW9uLnNldCgwLCAwLCA1MDEpOw0KDQogICAgICAgICAgICBvYmplY3QudHJhdmVyc2UoZnVuY3Rpb24oY2hpbGQpIHsNCiAgICAgICAgICAgICAgICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBUSFJFRS5NZXNoKSB7DQogICAgICAgICAgICAgICAgICAgIC8v6K6+572u5qih5Z6L55qu6IKkDQogICAgICAgICAgICAgICAgICAgIGNoaWxkLm1hdGVyaWFsLm1hcCA9IFRIUkVFLkltYWdlVXRpbHMubG9hZFRleHR1cmUoICcuLi9tb2RlbHMvSmV0X0Jhc2VDb2xvci5wbmcnKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIC8v5bCG5qih5Z6L5re75Yqg5Yiw5Zy65pmv5LitDQogICAgICAgICAgICBzY2VuZS5hZGQob2JqZWN0KTsNCiAgICAgICAgfSk7DQogICAgfSwNCg0KICAgIGFkZEFsYnVtOiBmdW5jdGlvbiAoKSB7DQogICAgICBjb25zdCB7IHNjZW5lLCBjYW1lcmEsIHJlbmRlcmVyIH0gPSB0aGlzOw0KICAgICAgY29uc3QgYWxidW0gPSBuZXcgQWxidW0oeyBjYW1lcmEsIHJlbmRlcmVyIH0pOw0KICAgICAgYWxidW0uYWRkVG9TY2VuZShzY2VuZSk7DQogICAgICB0aGlzLmFsYnVtID0gYWxidW07DQogICAgfSwNCg0KICAgIGFkZE1vdXNlQW5kRWZmZWN0OiBmdW5jdGlvbiAoKSB7DQogICAgICBjb25zdCB7IHNjZW5lLCByZW5kZXJlciwgY2FtZXJhLCBhbGJ1bSB9ID0gdGhpczsNCiAgICAgIGNvbnN0IGZvbGxvdyA9IG5ldyBGb2xsb3dFZmZlY3Qoew0KICAgICAgICB0ZXh0dXJlLA0KICAgICAgICByZW5kZXJlciwNCiAgICAgICAgY2FtZXJhLA0KICAgICAgICBzY2VuZSwNCiAgICAgIH0pOw0KDQogICAgICBuZXcgTW91c2UoeyBkaXNwbGF5OiBhbGJ1bS5kaXNwbGF5LCBjYW1lcmEsIHJlbmRlcmVyIH0pOw0KDQogICAgICB0aGlzLmZvbGxvdyA9IGZvbGxvdzsNCiAgICB9LA0KDQogICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7DQogICAgICBjb25zdCB7IHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhLCByb2NrcywgY2xvY2ssIGZvbGxvdyB9ID0gdGhpczsNCiAgICAgIC8vIHZhciBjb250cm9scyA9IG5ldyBPcmJpdENvbnRyb2xzKGNhbWVyYSwgcmVuZGVyZXIuZG9tRWxlbWVudCk7DQogICAgICAvLyAvLyDkvb/liqjnlLvlvqrnjq/kvb/nlKjml7bpmLvlsLzmiJboh6rovawg5oSP5oCd5piv5ZCm5pyJ5oOv5oCnDQogICAgICAvLyBjb250cm9scy5lbmFibGVEYW1waW5nID0gdHJ1ZTsNCiAgICAgIC8vIC8v5piv5ZCm5Y+v5Lul57yp5pS+DQogICAgICAvLyBjb250cm9scy5lbmFibGVab29tID0gdHJ1ZTsNCiAgICAgIC8vIC8v5piv5ZCm6Ieq5Yqo5peL6L2sDQogICAgICAvLyBjb250cm9scy5hdXRvUm90YXRlID0gdHJ1ZTsNCiAgICAgIC8vIC8v6K6+572u55u45py66Led56a75Y6f54K555qE5pyA6L+c6Led56a7DQogICAgICAvLyBjb250cm9scy5taW5EaXN0YW5jZSA9IDIwMDsNCiAgICAgIC8vIC8v6K6+572u55u45py66Led56a75Y6f54K555qE5pyA6L+c6Led56a7DQogICAgICAvLyBjb250cm9scy5tYXhEaXN0YW5jZSA9IDYwMDsNCiAgICAgIC8vIC8v5piv5ZCm5byA5ZCv5Y+z6ZSu5ouW5ou9DQogICAgICAvLyBjb250cm9scy5lbmFibGVQYW4gPSB0cnVlOw0KICAgICAgZm9sbG93LnJlbmRlcigpOw0KICAgICAgcm9ja3MucmVuZGVyKGNsb2NrKTsNCiAgICAgIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgY2FtZXJhKTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["World.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"World.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"world\" ref=\"container\"></div>\r\n</template>\r\n\r\n<script>\r\nimport * as THREE from \"three\";\r\n// import { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\nimport { OBJLoader } from \"three/examples/jsm/loaders/OBJLoader\";\r\nimport RAFManager from \"raf-manager\";\r\nimport Rocks from \"./Rocks\";\r\nimport Album from \"./Album\";\r\nimport Mouse from \"./Mouse\";\r\nimport FollowEffect from \"./FollowEffect\";\r\nimport texture from \"../assets/dot.png\";\r\n\r\nexport default {\r\n  name: \"World\",\r\n  mounted() {\r\n    this.initThree();\r\n    this.addLight();\r\n    this.addBackRocks();\r\n    this.addAlbum();\r\n    this.addMouseAndEffect();\r\n\r\n    this.addModels();\r\n\r\n    this.render = this.render.bind(this);\r\n    RAFManager.add(this.render);\r\n  },\r\n  destroyed() {\r\n    RAFManager.remove(this.render);\r\n  },\r\n\r\n  methods: {\r\n    initThree: function () {\r\n      const container = this.$refs.container;\r\n      const camera = new THREE.PerspectiveCamera(\r\n        45,\r\n        container.offsetWidth / container.offsetHeight,\r\n        1,\r\n        3000\r\n      );\r\n       \r\n      camera.position.set(0, 0, 500);\r\n\r\n\r\n      const scene = new THREE.Scene();\r\n      const renderer = new THREE.WebGLRenderer({ alpha: true });\r\n      renderer.setPixelRatio(window.devicePixelRatio);\r\n      renderer.setSize(container.offsetWidth, container.offsetHeight);\r\n      container.appendChild(renderer.domElement);\r\n      renderer.setClearColor(0x000000, 0);\r\n      const clock = new THREE.Clock();\r\n\r\n      this.clock = clock;\r\n      this.scene = scene;\r\n      this.camera = camera;\r\n      this.renderer = renderer;\r\n    },\r\n\r\n    addLight: function () {\r\n      const { scene } = this;\r\n\r\n      const hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444);\r\n      hemiLight.position.set(0, 1000, 0);\r\n      scene.add(hemiLight);\r\n\r\n      const dirLight = new THREE.DirectionalLight(0xffffff, 0.8);\r\n      dirLight.position.set(-3000, 1000, -1000);\r\n      scene.add(dirLight);\r\n    },\r\n\r\n    addBackRocks: function () {\r\n      const { scene } = this;\r\n      const rocks = new Rocks();\r\n      rocks.addToScene(scene);\r\n      this.rocks = rocks;\r\n    },\r\n\r\n    addModels: function () {\r\n      let { scene } = this;\r\n      //导入obj模型\r\n        var objLoader = new OBJLoader();\r\n        objLoader.load('../models/Plane.obj', function (object) {\r\n            console.log(object)\r\n            //设置模型缩放比例\r\n            object.scale.set(1, 1, 1);\r\n            //设置模型的坐标\r\n            object.position.set(0, 0, 501);\r\n\r\n            object.traverse(function(child) {\r\n                if (child instanceof THREE.Mesh) {\r\n                    //设置模型皮肤\r\n                    child.material.map = THREE.ImageUtils.loadTexture( '../models/Jet_BaseColor.png');\r\n                }\r\n            });\r\n            //将模型添加到场景中\r\n            scene.add(object);\r\n        });\r\n    },\r\n\r\n    addAlbum: function () {\r\n      const { scene, camera, renderer } = this;\r\n      const album = new Album({ camera, renderer });\r\n      album.addToScene(scene);\r\n      this.album = album;\r\n    },\r\n\r\n    addMouseAndEffect: function () {\r\n      const { scene, renderer, camera, album } = this;\r\n      const follow = new FollowEffect({\r\n        texture,\r\n        renderer,\r\n        camera,\r\n        scene,\r\n      });\r\n\r\n      new Mouse({ display: album.display, camera, renderer });\r\n\r\n      this.follow = follow;\r\n    },\r\n\r\n    render: function () {\r\n      const { renderer, scene, camera, rocks, clock, follow } = this;\r\n      // var controls = new OrbitControls(camera, renderer.domElement);\r\n      // // 使动画循环使用时阻尼或自转 意思是否有惯性\r\n      // controls.enableDamping = true;\r\n      // //是否可以缩放\r\n      // controls.enableZoom = true;\r\n      // //是否自动旋转\r\n      // controls.autoRotate = true;\r\n      // //设置相机距离原点的最远距离\r\n      // controls.minDistance = 200;\r\n      // //设置相机距离原点的最远距离\r\n      // controls.maxDistance = 600;\r\n      // //是否开启右键拖拽\r\n      // controls.enablePan = true;\r\n      follow.render();\r\n      rocks.render(clock);\r\n      renderer.render(scene, camera);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n.world {\r\n  position: absolute;\r\n  bottom: 0;\r\n  margin: 0;\r\n  padding: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #161616;\r\n  background-image: radial-gradient(#161616, #000);\r\n}\r\n</style>\r\n"]}]}