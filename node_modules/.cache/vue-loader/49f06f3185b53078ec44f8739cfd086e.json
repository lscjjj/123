{"remainingRequest":"F:\\html\\123\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\html\\123\\src\\components\\World.vue?vue&type=style&index=0&id=31b2ee92&scoped=true&lang=css&","dependencies":[{"path":"F:\\html\\123\\src\\components\\World.vue","mtime":1648091627916},{"path":"F:\\html\\123\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\html\\123\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\html\\123\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"F:\\html\\123\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\html\\123\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi53b3JsZCB7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgYm90dG9tOiAwOw0KICBtYXJnaW46IDA7DQogIHBhZGRpbmc6IDA7DQogIHdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IDEwMCU7DQogIGJhY2tncm91bmQtY29sb3I6ICMxNjE2MTY7DQogIGJhY2tncm91bmQtaW1hZ2U6IHJhZGlhbC1ncmFkaWVudCgjMTYxNjE2LCAjMDAwKTsNCn0NCg=="},{"version":3,"sources":["World.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"World.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"world\" ref=\"container\"></div>\r\n</template>\r\n\r\n<script>\r\nimport * as THREE from \"three\";\r\n// import { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\nimport { OBJLoader } from \"three/examples/jsm/loaders/OBJLoader\";\r\nimport RAFManager from \"raf-manager\";\r\nimport Rocks from \"./Rocks\";\r\nimport Album from \"./Album\";\r\nimport Mouse from \"./Mouse\";\r\nimport FollowEffect from \"./FollowEffect\";\r\nimport texture from \"../assets/dot.png\";\r\n\r\nexport default {\r\n  name: \"World\",\r\n  mounted() {\r\n    this.initThree();\r\n    this.addLight();\r\n    this.addBackRocks();\r\n    this.addAlbum();\r\n    this.addMouseAndEffect();\r\n\r\n    this.addModels();\r\n\r\n    this.render = this.render.bind(this);\r\n    RAFManager.add(this.render);\r\n  },\r\n  destroyed() {\r\n    RAFManager.remove(this.render);\r\n  },\r\n\r\n  methods: {\r\n    initThree: function () {\r\n      const container = this.$refs.container;\r\n      const camera = new THREE.PerspectiveCamera(\r\n        45,\r\n        container.offsetWidth / container.offsetHeight,\r\n        1,\r\n        3000\r\n      );\r\n       \r\n      camera.position.set(0, 0, 500);\r\n\r\n\r\n      const scene = new THREE.Scene();\r\n      const renderer = new THREE.WebGLRenderer({ alpha: true });\r\n      renderer.setPixelRatio(window.devicePixelRatio);\r\n      renderer.setSize(container.offsetWidth, container.offsetHeight);\r\n      container.appendChild(renderer.domElement);\r\n      renderer.setClearColor(0x000000, 0);\r\n      const clock = new THREE.Clock();\r\n\r\n      this.clock = clock;\r\n      this.scene = scene;\r\n      this.camera = camera;\r\n      this.renderer = renderer;\r\n    },\r\n\r\n    addLight: function () {\r\n      const { scene } = this;\r\n\r\n      const hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444);\r\n      hemiLight.position.set(0, 1000, 0);\r\n      scene.add(hemiLight);\r\n\r\n      const dirLight = new THREE.DirectionalLight(0xffffff, 0.8);\r\n      dirLight.position.set(-3000, 1000, -1000);\r\n      scene.add(dirLight);\r\n    },\r\n\r\n    addBackRocks: function () {\r\n      const { scene } = this;\r\n      const rocks = new Rocks();\r\n      rocks.addToScene(scene);\r\n      this.rocks = rocks;\r\n    },\r\n\r\n    addModels: function () {\r\n      let { scene } = this;\r\n      //导入obj模型\r\n        var objLoader = new OBJLoader();\r\n        objLoader.load('../models/Plane.obj', function (object) {\r\n            console.log(object)\r\n            //设置模型缩放比例\r\n            object.scale.set(1, 1, 1);\r\n            //设置模型的坐标\r\n            object.position.set(0, 0, 501);\r\n\r\n            object.traverse(function(child) {\r\n                if (child instanceof THREE.Mesh) {\r\n                    //设置模型皮肤\r\n                    child.material.map = THREE.ImageUtils.loadTexture( '../models/Jet_BaseColor.png');\r\n                }\r\n            });\r\n            //将模型添加到场景中\r\n            scene.add(object);\r\n        });\r\n    },\r\n\r\n    addAlbum: function () {\r\n      const { scene, camera, renderer } = this;\r\n      const album = new Album({ camera, renderer });\r\n      album.addToScene(scene);\r\n      this.album = album;\r\n    },\r\n\r\n    addMouseAndEffect: function () {\r\n      const { scene, renderer, camera, album } = this;\r\n      const follow = new FollowEffect({\r\n        texture,\r\n        renderer,\r\n        camera,\r\n        scene,\r\n      });\r\n\r\n      new Mouse({ display: album.display, camera, renderer });\r\n\r\n      this.follow = follow;\r\n    },\r\n\r\n    render: function () {\r\n      const { renderer, scene, camera, rocks, clock, follow } = this;\r\n      // var controls = new OrbitControls(camera, renderer.domElement);\r\n      // // 使动画循环使用时阻尼或自转 意思是否有惯性\r\n      // controls.enableDamping = true;\r\n      // //是否可以缩放\r\n      // controls.enableZoom = true;\r\n      // //是否自动旋转\r\n      // controls.autoRotate = true;\r\n      // //设置相机距离原点的最远距离\r\n      // controls.minDistance = 200;\r\n      // //设置相机距离原点的最远距离\r\n      // controls.maxDistance = 600;\r\n      // //是否开启右键拖拽\r\n      // controls.enablePan = true;\r\n      follow.render();\r\n      rocks.render(clock);\r\n      renderer.render(scene, camera);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n.world {\r\n  position: absolute;\r\n  bottom: 0;\r\n  margin: 0;\r\n  padding: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #161616;\r\n  background-image: radial-gradient(#161616, #000);\r\n}\r\n</style>\r\n"]}]}