{"remainingRequest":"F:\\html\\123\\node_modules\\thread-loader\\dist\\cjs.js!F:\\html\\123\\node_modules\\babel-loader\\lib\\index.js!F:\\html\\123\\node_modules\\eslint-loader\\index.js??ref--12-0!F:\\html\\123\\src\\components\\Mouse.js","dependencies":[{"path":"F:\\html\\123\\src\\components\\Mouse.js","mtime":1648088416986},{"path":"F:\\html\\123\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\html\\123\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\html\\123\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\html\\123\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICogYXMgVEhSRUUgZnJvbSAidGhyZWUiOwppbXBvcnQgeEVtaWl0ZXIgZnJvbSAieGVtaXR0ZXJqcyI7CmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vdXNlIHsKICBjb25zdHJ1Y3Rvcihjb25mKSB7CiAgICB0aGlzLmluaXQoY29uZik7CiAgICB0aGlzLmFkZE1vdXNlRXZlbnQoKTsKICB9CgogIGluaXQoewogICAgZGlzcGxheSwKICAgIGNhbWVyYSwKICAgIHJlbmRlcmVyCiAgfSkgewogICAgY29uc3QgbW91c2UgPSBuZXcgVEhSRUUuVmVjdG9yMigpOwogICAgY29uc3QgcmF5Y2FzdGVyID0gbmV3IFRIUkVFLlJheWNhc3RlcigpOwogICAgdGhpcy5yYXljYXN0ZXIgPSByYXljYXN0ZXI7CiAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7CiAgICB0aGlzLmRpc3BsYXkgPSBkaXNwbGF5OwogICAgdGhpcy5jYW1lcmEgPSBjYW1lcmE7CiAgICB0aGlzLm1vdXNlID0gbW91c2U7CiAgfQoKICBhZGRNb3VzZUV2ZW50KCkgewogICAgdGhpcy5vbkNsaWNrID0gdGhpcy5vbkNsaWNrLmJpbmQodGhpcyk7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIHRoaXMub25DbGljaywgZmFsc2UpOwogIH0KCiAgb25DbGljayhlKSB7CiAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICBjb25zdCB7CiAgICAgIG1vdXNlLAogICAgICByZW5kZXJlcgogICAgfSA9IHRoaXM7CiAgICBjb25zdCBjYW52YXMgPSByZW5kZXJlci5kb21FbGVtZW50OwogICAgY29uc3QgcmF0aW8gPSByZW5kZXJlci5nZXRQaXhlbFJhdGlvKCk7CiAgICBjb25zdCByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgbGV0IHggPSBlLmNsaWVudFggLSByZWN0LmxlZnQ7CiAgICBsZXQgeSA9IGUuY2xpZW50WSAtIHJlY3QudG9wOwogICAgeCAqPSByYXRpbzsKICAgIHkgKj0gcmF0aW87CiAgICBtb3VzZS54ID0geCAvIGNhbnZhcy53aWR0aCAqIDIgLSAxOwogICAgbW91c2UueSA9IC0oeSAvIGNhbnZhcy5oZWlnaHQpICogMiArIDE7CiAgICB0aGlzLnJlbmRlcigpOwogIH0KCiAgcmVuZGVyKCkgewogICAgY29uc3QgewogICAgICByYXljYXN0ZXIsCiAgICAgIGRpc3BsYXksCiAgICAgIGNhbWVyYSwKICAgICAgbW91c2UKICAgIH0gPSB0aGlzOwogICAgcmF5Y2FzdGVyLnNldEZyb21DYW1lcmEobW91c2UsIGNhbWVyYSk7CiAgICBjb25zdCBpbnRlcnNlY3RzID0gcmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHMoZGlzcGxheS5jaGlsZHJlbik7CgogICAgaWYgKGludGVyc2VjdHMubGVuZ3RoID4gMCkgewogICAgICBjb25zdCBkaXNwbGF5ID0gaW50ZXJzZWN0c1swXS5vYmplY3Q7CiAgICAgIGRpc3BsYXkuc2hvdyA9ICFkaXNwbGF5LnNob3c7CiAgICAgIHhFbWlpdGVyLmVtaXQoIkNMSUNLIiwgZGlzcGxheSk7CiAgICB9CiAgfQoKICBkZXN0cm95KCkgewogICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigiY2xpY2siLCB0aGlzLm9uQ2xpY2ssIGZhbHNlKTsKICB9Cgp9"},{"version":3,"sources":["F:/html/123/src/components/Mouse.js"],"names":["THREE","xEmiiter","Mouse","constructor","conf","init","addMouseEvent","display","camera","renderer","mouse","Vector2","raycaster","Raycaster","onClick","bind","document","addEventListener","e","preventDefault","canvas","domElement","ratio","getPixelRatio","rect","getBoundingClientRect","x","clientX","left","y","clientY","top","width","height","render","setFromCamera","intersects","intersectObjects","children","length","object","show","emit","destroy","removeEventListener"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,OAAOC,QAAP,MAAqB,YAArB;AAEA,eAAe,MAAMC,KAAN,CAAY;AACzBC,EAAAA,WAAW,CAACC,IAAD,EAAO;AAChB,SAAKC,IAAL,CAAUD,IAAV;AACA,SAAKE,aAAL;AACD;;AAEDD,EAAAA,IAAI,CAAC;AAAEE,IAAAA,OAAF;AAAWC,IAAAA,MAAX;AAAmBC,IAAAA;AAAnB,GAAD,EAAgC;AAClC,UAAMC,KAAK,GAAG,IAAIV,KAAK,CAACW,OAAV,EAAd;AACA,UAAMC,SAAS,GAAG,IAAIZ,KAAK,CAACa,SAAV,EAAlB;AAEA,SAAKD,SAAL,GAAiBA,SAAjB;AACA,SAAKH,QAAL,GAAgBA,QAAhB;AACA,SAAKF,OAAL,GAAeA,OAAf;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKE,KAAL,GAAaA,KAAb;AACD;;AAEDJ,EAAAA,aAAa,GAAG;AACd,SAAKQ,OAAL,GAAe,KAAKA,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CAAf;AACAC,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,EAAmC,KAAKH,OAAxC,EAAiD,KAAjD;AACD;;AAEDA,EAAAA,OAAO,CAACI,CAAD,EAAI;AACTA,IAAAA,CAAC,CAACC,cAAF;AAEA,UAAM;AAAET,MAAAA,KAAF;AAASD,MAAAA;AAAT,QAAsB,IAA5B;AACA,UAAMW,MAAM,GAAGX,QAAQ,CAACY,UAAxB;AAEA,UAAMC,KAAK,GAAGb,QAAQ,CAACc,aAAT,EAAd;AACA,UAAMC,IAAI,GAAGJ,MAAM,CAACK,qBAAP,EAAb;AACA,QAAIC,CAAC,GAAGR,CAAC,CAACS,OAAF,GAAYH,IAAI,CAACI,IAAzB;AACA,QAAIC,CAAC,GAAGX,CAAC,CAACY,OAAF,GAAYN,IAAI,CAACO,GAAzB;AACAL,IAAAA,CAAC,IAAIJ,KAAL;AACAO,IAAAA,CAAC,IAAIP,KAAL;AAEAZ,IAAAA,KAAK,CAACgB,CAAN,GAAWA,CAAC,GAAGN,MAAM,CAACY,KAAZ,GAAqB,CAArB,GAAyB,CAAnC;AACAtB,IAAAA,KAAK,CAACmB,CAAN,GAAU,EAAEA,CAAC,GAAGT,MAAM,CAACa,MAAb,IAAuB,CAAvB,GAA2B,CAArC;AACA,SAAKC,MAAL;AACD;;AAEDA,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEtB,MAAAA,SAAF;AAAaL,MAAAA,OAAb;AAAsBC,MAAAA,MAAtB;AAA8BE,MAAAA;AAA9B,QAAwC,IAA9C;AAEAE,IAAAA,SAAS,CAACuB,aAAV,CAAwBzB,KAAxB,EAA+BF,MAA/B;AACA,UAAM4B,UAAU,GAAGxB,SAAS,CAACyB,gBAAV,CAA2B9B,OAAO,CAAC+B,QAAnC,CAAnB;;AAEA,QAAIF,UAAU,CAACG,MAAX,GAAoB,CAAxB,EAA2B;AACzB,YAAMhC,OAAO,GAAG6B,UAAU,CAAC,CAAD,CAAV,CAAcI,MAA9B;AACAjC,MAAAA,OAAO,CAACkC,IAAR,GAAe,CAAClC,OAAO,CAACkC,IAAxB;AACAxC,MAAAA,QAAQ,CAACyC,IAAT,CAAc,OAAd,EAAuBnC,OAAvB;AACD;AACF;;AAEDoC,EAAAA,OAAO,GAAG;AACR3B,IAAAA,QAAQ,CAAC4B,mBAAT,CAA6B,OAA7B,EAAsC,KAAK9B,OAA3C,EAAoD,KAApD;AACD;;AAvDwB","sourcesContent":["import * as THREE from \"three\";\r\nimport xEmiiter from \"xemitterjs\";\r\n\r\nexport default class Mouse {\r\n  constructor(conf) {\r\n    this.init(conf);\r\n    this.addMouseEvent();\r\n  }\r\n\r\n  init({ display, camera, renderer }) {\r\n    const mouse = new THREE.Vector2();\r\n    const raycaster = new THREE.Raycaster();\r\n\r\n    this.raycaster = raycaster;\r\n    this.renderer = renderer;\r\n    this.display = display;\r\n    this.camera = camera;\r\n    this.mouse = mouse;\r\n  }\r\n\r\n  addMouseEvent() {\r\n    this.onClick = this.onClick.bind(this);\r\n    document.addEventListener(\"click\", this.onClick, false);\r\n  }\r\n\r\n  onClick(e) {\r\n    e.preventDefault();\r\n\r\n    const { mouse, renderer } = this;\r\n    const canvas = renderer.domElement;\r\n\r\n    const ratio = renderer.getPixelRatio();\r\n    const rect = canvas.getBoundingClientRect();\r\n    let x = e.clientX - rect.left;\r\n    let y = e.clientY - rect.top;\r\n    x *= ratio;\r\n    y *= ratio;\r\n\r\n    mouse.x = (x / canvas.width) * 2 - 1;\r\n    mouse.y = -(y / canvas.height) * 2 + 1;\r\n    this.render();\r\n  }\r\n\r\n  render() {\r\n    const { raycaster, display, camera, mouse } = this;\r\n\r\n    raycaster.setFromCamera(mouse, camera);\r\n    const intersects = raycaster.intersectObjects(display.children);\r\n\r\n    if (intersects.length > 0) {\r\n      const display = intersects[0].object;\r\n      display.show = !display.show;\r\n      xEmiiter.emit(\"CLICK\", display);\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    document.removeEventListener(\"click\", this.onClick, false);\r\n  }\r\n}\r\n"]}]}