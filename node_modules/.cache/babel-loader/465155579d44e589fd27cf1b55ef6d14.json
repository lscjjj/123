{"remainingRequest":"F:\\html\\123\\node_modules\\thread-loader\\dist\\cjs.js!F:\\html\\123\\node_modules\\babel-loader\\lib\\index.js!F:\\html\\123\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\html\\123\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\html\\123\\src\\components\\World.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\html\\123\\src\\components\\World.vue","mtime":1648091627916},{"path":"F:\\html\\123\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\html\\123\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\html\\123\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\html\\123\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\html\\123\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAidGhyZWUiOyAvLyBpbXBvcnQgeyBPcmJpdENvbnRyb2xzIH0gZnJvbSAidGhyZWUvZXhhbXBsZXMvanNtL2NvbnRyb2xzL09yYml0Q29udHJvbHMiOwoKaW1wb3J0IHsgT0JKTG9hZGVyIH0gZnJvbSAidGhyZWUvZXhhbXBsZXMvanNtL2xvYWRlcnMvT0JKTG9hZGVyIjsKaW1wb3J0IFJBRk1hbmFnZXIgZnJvbSAicmFmLW1hbmFnZXIiOwppbXBvcnQgUm9ja3MgZnJvbSAiLi9Sb2NrcyI7CmltcG9ydCBBbGJ1bSBmcm9tICIuL0FsYnVtIjsKaW1wb3J0IE1vdXNlIGZyb20gIi4vTW91c2UiOwppbXBvcnQgRm9sbG93RWZmZWN0IGZyb20gIi4vRm9sbG93RWZmZWN0IjsKaW1wb3J0IHRleHR1cmUgZnJvbSAiLi4vYXNzZXRzL2RvdC5wbmciOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIldvcmxkIiwKCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdFRocmVlKCk7CiAgICB0aGlzLmFkZExpZ2h0KCk7CiAgICB0aGlzLmFkZEJhY2tSb2NrcygpOwogICAgdGhpcy5hZGRBbGJ1bSgpOwogICAgdGhpcy5hZGRNb3VzZUFuZEVmZmVjdCgpOwogICAgdGhpcy5hZGRNb2RlbHMoKTsKICAgIHRoaXMucmVuZGVyID0gdGhpcy5yZW5kZXIuYmluZCh0aGlzKTsKICAgIFJBRk1hbmFnZXIuYWRkKHRoaXMucmVuZGVyKTsKICB9LAoKICBkZXN0cm95ZWQoKSB7CiAgICBSQUZNYW5hZ2VyLnJlbW92ZSh0aGlzLnJlbmRlcik7CiAgfSwKCiAgbWV0aG9kczogewogICAgaW5pdFRocmVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuJHJlZnMuY29udGFpbmVyOwogICAgICBjb25zdCBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNDUsIGNvbnRhaW5lci5vZmZzZXRXaWR0aCAvIGNvbnRhaW5lci5vZmZzZXRIZWlnaHQsIDEsIDMwMDApOwogICAgICBjYW1lcmEucG9zaXRpb24uc2V0KDAsIDAsIDUwMCk7CiAgICAgIGNvbnN0IHNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7CiAgICAgIGNvbnN0IHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoewogICAgICAgIGFscGhhOiB0cnVlCiAgICAgIH0pOwogICAgICByZW5kZXJlci5zZXRQaXhlbFJhdGlvKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTsKICAgICAgcmVuZGVyZXIuc2V0U2l6ZShjb250YWluZXIub2Zmc2V0V2lkdGgsIGNvbnRhaW5lci5vZmZzZXRIZWlnaHQpOwogICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocmVuZGVyZXIuZG9tRWxlbWVudCk7CiAgICAgIHJlbmRlcmVyLnNldENsZWFyQ29sb3IoMHgwMDAwMDAsIDApOwogICAgICBjb25zdCBjbG9jayA9IG5ldyBUSFJFRS5DbG9jaygpOwogICAgICB0aGlzLmNsb2NrID0gY2xvY2s7CiAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTsKICAgICAgdGhpcy5jYW1lcmEgPSBjYW1lcmE7CiAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjsKICAgIH0sCiAgICBhZGRMaWdodDogZnVuY3Rpb24gKCkgewogICAgICBjb25zdCB7CiAgICAgICAgc2NlbmUKICAgICAgfSA9IHRoaXM7CiAgICAgIGNvbnN0IGhlbWlMaWdodCA9IG5ldyBUSFJFRS5IZW1pc3BoZXJlTGlnaHQoMHhmZmZmZmYsIDB4NDQ0NDQ0KTsKICAgICAgaGVtaUxpZ2h0LnBvc2l0aW9uLnNldCgwLCAxMDAwLCAwKTsKICAgICAgc2NlbmUuYWRkKGhlbWlMaWdodCk7CiAgICAgIGNvbnN0IGRpckxpZ2h0ID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoMHhmZmZmZmYsIDAuOCk7CiAgICAgIGRpckxpZ2h0LnBvc2l0aW9uLnNldCgtMzAwMCwgMTAwMCwgLTEwMDApOwogICAgICBzY2VuZS5hZGQoZGlyTGlnaHQpOwogICAgfSwKICAgIGFkZEJhY2tSb2NrczogZnVuY3Rpb24gKCkgewogICAgICBjb25zdCB7CiAgICAgICAgc2NlbmUKICAgICAgfSA9IHRoaXM7CiAgICAgIGNvbnN0IHJvY2tzID0gbmV3IFJvY2tzKCk7CiAgICAgIHJvY2tzLmFkZFRvU2NlbmUoc2NlbmUpOwogICAgICB0aGlzLnJvY2tzID0gcm9ja3M7CiAgICB9LAogICAgYWRkTW9kZWxzOiBmdW5jdGlvbiAoKSB7CiAgICAgIGxldCB7CiAgICAgICAgc2NlbmUKICAgICAgfSA9IHRoaXM7IC8v5a+85YWlb2Jq5qih5Z6LCgogICAgICB2YXIgb2JqTG9hZGVyID0gbmV3IE9CSkxvYWRlcigpOwogICAgICBvYmpMb2FkZXIubG9hZCgnLi4vbW9kZWxzL1BsYW5lLm9iaicsIGZ1bmN0aW9uIChvYmplY3QpIHsKICAgICAgICBjb25zb2xlLmxvZyhvYmplY3QpOyAvL+iuvue9ruaooeWei+e8qeaUvuavlOS+iwoKICAgICAgICBvYmplY3Quc2NhbGUuc2V0KDEsIDEsIDEpOyAvL+iuvue9ruaooeWei+eahOWdkOaghwoKICAgICAgICBvYmplY3QucG9zaXRpb24uc2V0KDAsIDAsIDUwMSk7CiAgICAgICAgb2JqZWN0LnRyYXZlcnNlKGZ1bmN0aW9uIChjaGlsZCkgewogICAgICAgICAgaWYgKGNoaWxkIGluc3RhbmNlb2YgVEhSRUUuTWVzaCkgewogICAgICAgICAgICAvL+iuvue9ruaooeWei+earuiCpAogICAgICAgICAgICBjaGlsZC5tYXRlcmlhbC5tYXAgPSBUSFJFRS5JbWFnZVV0aWxzLmxvYWRUZXh0dXJlKCcuLi9tb2RlbHMvSmV0X0Jhc2VDb2xvci5wbmcnKTsKICAgICAgICAgIH0KICAgICAgICB9KTsgLy/lsIbmqKHlnovmt7vliqDliLDlnLrmma/kuK0KCiAgICAgICAgc2NlbmUuYWRkKG9iamVjdCk7CiAgICAgIH0pOwogICAgfSwKICAgIGFkZEFsYnVtOiBmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBzY2VuZSwKICAgICAgICBjYW1lcmEsCiAgICAgICAgcmVuZGVyZXIKICAgICAgfSA9IHRoaXM7CiAgICAgIGNvbnN0IGFsYnVtID0gbmV3IEFsYnVtKHsKICAgICAgICBjYW1lcmEsCiAgICAgICAgcmVuZGVyZXIKICAgICAgfSk7CiAgICAgIGFsYnVtLmFkZFRvU2NlbmUoc2NlbmUpOwogICAgICB0aGlzLmFsYnVtID0gYWxidW07CiAgICB9LAogICAgYWRkTW91c2VBbmRFZmZlY3Q6IGZ1bmN0aW9uICgpIHsKICAgICAgY29uc3QgewogICAgICAgIHNjZW5lLAogICAgICAgIHJlbmRlcmVyLAogICAgICAgIGNhbWVyYSwKICAgICAgICBhbGJ1bQogICAgICB9ID0gdGhpczsKICAgICAgY29uc3QgZm9sbG93ID0gbmV3IEZvbGxvd0VmZmVjdCh7CiAgICAgICAgdGV4dHVyZSwKICAgICAgICByZW5kZXJlciwKICAgICAgICBjYW1lcmEsCiAgICAgICAgc2NlbmUKICAgICAgfSk7CiAgICAgIG5ldyBNb3VzZSh7CiAgICAgICAgZGlzcGxheTogYWxidW0uZGlzcGxheSwKICAgICAgICBjYW1lcmEsCiAgICAgICAgcmVuZGVyZXIKICAgICAgfSk7CiAgICAgIHRoaXMuZm9sbG93ID0gZm9sbG93OwogICAgfSwKICAgIHJlbmRlcjogZnVuY3Rpb24gKCkgewogICAgICBjb25zdCB7CiAgICAgICAgcmVuZGVyZXIsCiAgICAgICAgc2NlbmUsCiAgICAgICAgY2FtZXJhLAogICAgICAgIHJvY2tzLAogICAgICAgIGNsb2NrLAogICAgICAgIGZvbGxvdwogICAgICB9ID0gdGhpczsgLy8gdmFyIGNvbnRyb2xzID0gbmV3IE9yYml0Q29udHJvbHMoY2FtZXJhLCByZW5kZXJlci5kb21FbGVtZW50KTsKICAgICAgLy8gLy8g5L2/5Yqo55S75b6q546v5L2/55So5pe26Zi75bC85oiW6Ieq6L2sIOaEj+aAneaYr+WQpuacieaDr+aApwogICAgICAvLyBjb250cm9scy5lbmFibGVEYW1waW5nID0gdHJ1ZTsKICAgICAgLy8gLy/mmK/lkKblj6/ku6XnvKnmlL4KICAgICAgLy8gY29udHJvbHMuZW5hYmxlWm9vbSA9IHRydWU7CiAgICAgIC8vIC8v5piv5ZCm6Ieq5Yqo5peL6L2sCiAgICAgIC8vIGNvbnRyb2xzLmF1dG9Sb3RhdGUgPSB0cnVlOwogICAgICAvLyAvL+iuvue9ruebuOacuui3neemu+WOn+eCueeahOacgOi/nOi3neemuwogICAgICAvLyBjb250cm9scy5taW5EaXN0YW5jZSA9IDIwMDsKICAgICAgLy8gLy/orr7nva7nm7jmnLrot53nprvljp/ngrnnmoTmnIDov5zot53nprsKICAgICAgLy8gY29udHJvbHMubWF4RGlzdGFuY2UgPSA2MDA7CiAgICAgIC8vIC8v5piv5ZCm5byA5ZCv5Y+z6ZSu5ouW5ou9CiAgICAgIC8vIGNvbnRyb2xzLmVuYWJsZVBhbiA9IHRydWU7CgogICAgICBmb2xsb3cucmVuZGVyKCk7CiAgICAgIHJvY2tzLnJlbmRlcihjbG9jayk7CiAgICAgIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgY2FtZXJhKTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;AAKA,+B,CACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACAA,eADA;;AAEAC;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACAC;AACA,GAbA;;AAcAC;AACAD;AACA,GAhBA;;AAkBAE;AACAC;AACA;AACA,iDACA,EADA,EAEAC,8CAFA,EAGA,CAHA,EAIA,IAJA;AAOAC;AAGA;AACA;AAAAC;AAAA;AACAC;AACAA;AACAH;AACAG;AACA;AAEA;AACA;AACA;AACA;AACA,KAzBA;AA2BAC;AACA;AAAAC;AAAA;AAEA;AACAC;AACAD;AAEA;AACAE;AACAF;AACA,KArCA;AAuCAG;AACA;AAAAH;AAAA;AACA;AACAI;AACA;AACA,KA5CA;AA8CAC;AACA;AAAAL;AAAA,eADA,CAEA;;AACA;AACAM;AACAC,4BADA,CAEA;;AACAC,kCAHA,CAIA;;AACAA;AAEAA;AACA;AACA;AACAC;AACA;AACA,SALA,EAPA,CAaA;;AACAT;AACA,OAfA;AAgBA,KAlEA;AAoEAU;AACA;AAAAV;AAAAJ;AAAAE;AAAA;AACA;AAAAF;AAAAE;AAAA;AACAa;AACA;AACA,KAzEA;AA2EAC;AACA;AAAAZ;AAAAF;AAAAF;AAAAe;AAAA;AACA;AACAE,eADA;AAEAf,gBAFA;AAGAF,cAHA;AAIAI;AAJA;AAOA;AAAAc;AAAAlB;AAAAE;AAAA;AAEA;AACA,KAvFA;AAyFAiB;AACA;AAAAjB;AAAAE;AAAAJ;AAAAQ;AAAAY;AAAAC;AAAA,eADA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAA;AACAb;AACAN;AACA;AA3GA;AAlBA","names":["name","mounted","RAFManager","destroyed","methods","initThree","container","camera","alpha","renderer","addLight","scene","hemiLight","dirLight","addBackRocks","rocks","addModels","objLoader","console","object","child","addAlbum","album","addMouseAndEffect","texture","display","render","clock","follow"],"sourceRoot":"src/components","sources":["World.vue"],"sourcesContent":["<template>\r\n  <div class=\"world\" ref=\"container\"></div>\r\n</template>\r\n\r\n<script>\r\nimport * as THREE from \"three\";\r\n// import { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\nimport { OBJLoader } from \"three/examples/jsm/loaders/OBJLoader\";\r\nimport RAFManager from \"raf-manager\";\r\nimport Rocks from \"./Rocks\";\r\nimport Album from \"./Album\";\r\nimport Mouse from \"./Mouse\";\r\nimport FollowEffect from \"./FollowEffect\";\r\nimport texture from \"../assets/dot.png\";\r\n\r\nexport default {\r\n  name: \"World\",\r\n  mounted() {\r\n    this.initThree();\r\n    this.addLight();\r\n    this.addBackRocks();\r\n    this.addAlbum();\r\n    this.addMouseAndEffect();\r\n\r\n    this.addModels();\r\n\r\n    this.render = this.render.bind(this);\r\n    RAFManager.add(this.render);\r\n  },\r\n  destroyed() {\r\n    RAFManager.remove(this.render);\r\n  },\r\n\r\n  methods: {\r\n    initThree: function () {\r\n      const container = this.$refs.container;\r\n      const camera = new THREE.PerspectiveCamera(\r\n        45,\r\n        container.offsetWidth / container.offsetHeight,\r\n        1,\r\n        3000\r\n      );\r\n       \r\n      camera.position.set(0, 0, 500);\r\n\r\n\r\n      const scene = new THREE.Scene();\r\n      const renderer = new THREE.WebGLRenderer({ alpha: true });\r\n      renderer.setPixelRatio(window.devicePixelRatio);\r\n      renderer.setSize(container.offsetWidth, container.offsetHeight);\r\n      container.appendChild(renderer.domElement);\r\n      renderer.setClearColor(0x000000, 0);\r\n      const clock = new THREE.Clock();\r\n\r\n      this.clock = clock;\r\n      this.scene = scene;\r\n      this.camera = camera;\r\n      this.renderer = renderer;\r\n    },\r\n\r\n    addLight: function () {\r\n      const { scene } = this;\r\n\r\n      const hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444);\r\n      hemiLight.position.set(0, 1000, 0);\r\n      scene.add(hemiLight);\r\n\r\n      const dirLight = new THREE.DirectionalLight(0xffffff, 0.8);\r\n      dirLight.position.set(-3000, 1000, -1000);\r\n      scene.add(dirLight);\r\n    },\r\n\r\n    addBackRocks: function () {\r\n      const { scene } = this;\r\n      const rocks = new Rocks();\r\n      rocks.addToScene(scene);\r\n      this.rocks = rocks;\r\n    },\r\n\r\n    addModels: function () {\r\n      let { scene } = this;\r\n      //导入obj模型\r\n        var objLoader = new OBJLoader();\r\n        objLoader.load('../models/Plane.obj', function (object) {\r\n            console.log(object)\r\n            //设置模型缩放比例\r\n            object.scale.set(1, 1, 1);\r\n            //设置模型的坐标\r\n            object.position.set(0, 0, 501);\r\n\r\n            object.traverse(function(child) {\r\n                if (child instanceof THREE.Mesh) {\r\n                    //设置模型皮肤\r\n                    child.material.map = THREE.ImageUtils.loadTexture( '../models/Jet_BaseColor.png');\r\n                }\r\n            });\r\n            //将模型添加到场景中\r\n            scene.add(object);\r\n        });\r\n    },\r\n\r\n    addAlbum: function () {\r\n      const { scene, camera, renderer } = this;\r\n      const album = new Album({ camera, renderer });\r\n      album.addToScene(scene);\r\n      this.album = album;\r\n    },\r\n\r\n    addMouseAndEffect: function () {\r\n      const { scene, renderer, camera, album } = this;\r\n      const follow = new FollowEffect({\r\n        texture,\r\n        renderer,\r\n        camera,\r\n        scene,\r\n      });\r\n\r\n      new Mouse({ display: album.display, camera, renderer });\r\n\r\n      this.follow = follow;\r\n    },\r\n\r\n    render: function () {\r\n      const { renderer, scene, camera, rocks, clock, follow } = this;\r\n      // var controls = new OrbitControls(camera, renderer.domElement);\r\n      // // 使动画循环使用时阻尼或自转 意思是否有惯性\r\n      // controls.enableDamping = true;\r\n      // //是否可以缩放\r\n      // controls.enableZoom = true;\r\n      // //是否自动旋转\r\n      // controls.autoRotate = true;\r\n      // //设置相机距离原点的最远距离\r\n      // controls.minDistance = 200;\r\n      // //设置相机距离原点的最远距离\r\n      // controls.maxDistance = 600;\r\n      // //是否开启右键拖拽\r\n      // controls.enablePan = true;\r\n      follow.render();\r\n      rocks.render(clock);\r\n      renderer.render(scene, camera);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n.world {\r\n  position: absolute;\r\n  bottom: 0;\r\n  margin: 0;\r\n  padding: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #161616;\r\n  background-image: radial-gradient(#161616, #000);\r\n}\r\n</style>\r\n"]}]}