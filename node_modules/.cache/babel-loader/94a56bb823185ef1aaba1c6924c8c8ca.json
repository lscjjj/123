{"remainingRequest":"F:\\html\\123\\node_modules\\babel-loader\\lib\\index.js!F:\\html\\123\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\html\\123\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\html\\123\\src\\components\\World.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\html\\123\\src\\components\\World.vue","mtime":1648174132637},{"path":"F:\\html\\123\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\html\\123\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\html\\123\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\html\\123\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAidGhyZWUiOyAvLyBpbXBvcnQgeyBPcmJpdENvbnRyb2xzIH0gZnJvbSAidGhyZWUvZXhhbXBsZXMvanNtL2NvbnRyb2xzL09yYml0Q29udHJvbHMiOwoKaW1wb3J0IHsgT0JKTG9hZGVyIH0gZnJvbSAidGhyZWUvZXhhbXBsZXMvanNtL2xvYWRlcnMvT0JKTG9hZGVyIjsKaW1wb3J0IHsgVHJhY2tiYWxsQ29udHJvbHMgfSBmcm9tICJ0aHJlZS9leGFtcGxlcy9qc20vY29udHJvbHMvVHJhY2tiYWxsQ29udHJvbHMiOwppbXBvcnQgUkFGTWFuYWdlciBmcm9tICJyYWYtbWFuYWdlciI7CmltcG9ydCBSb2NrcyBmcm9tICIuL1JvY2tzIjsKaW1wb3J0IEFsYnVtIGZyb20gIi4vQWxidW0iOwppbXBvcnQgTW91c2UgZnJvbSAiLi9Nb3VzZSI7CmltcG9ydCBGb2xsb3dFZmZlY3QgZnJvbSAiLi9Gb2xsb3dFZmZlY3QiOwppbXBvcnQgdGV4dHVyZSBmcm9tICIuLi9hc3NldHMvZG90LnBuZyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiV29ybGQiLAoKICBtb3VudGVkKCkgewogICAgdGhpcy5pbml0VGhyZWUoKTsKICAgIHRoaXMuYWRkTGlnaHQoKTsKICAgIHRoaXMuYWRkQmFja1JvY2tzKCk7CiAgICB0aGlzLmFkZEFsYnVtKCk7CiAgICB0aGlzLmFkZE1vdXNlQW5kRWZmZWN0KCk7CiAgICB0aGlzLmFkZE1vZGVscygpOwogICAgdGhpcy5yZW5kZXIgPSB0aGlzLnJlbmRlci5iaW5kKHRoaXMpOwogICAgUkFGTWFuYWdlci5hZGQodGhpcy5yZW5kZXIpOwogIH0sCgogIGRlc3Ryb3llZCgpIHsKICAgIFJBRk1hbmFnZXIucmVtb3ZlKHRoaXMucmVuZGVyKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBpbml0VGhyZWU6IGZ1bmN0aW9uICgpIHsKICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy4kcmVmcy5jb250YWluZXI7CiAgICAgIGNvbnN0IGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg0NSwgY29udGFpbmVyLm9mZnNldFdpZHRoIC8gY29udGFpbmVyLm9mZnNldEhlaWdodCwgMSwgMzAwMCk7CiAgICAgIGNhbWVyYS5wb3NpdGlvbi5zZXQoMCwgMCwgNTAwKTsKICAgICAgY29uc3Qgc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTsKICAgICAgY29uc3QgcmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcih7CiAgICAgICAgYWxwaGE6IHRydWUKICAgICAgfSk7CiAgICAgIHJlbmRlcmVyLnNldFBpeGVsUmF0aW8od2luZG93LmRldmljZVBpeGVsUmF0aW8pOwogICAgICByZW5kZXJlci5zZXRTaXplKGNvbnRhaW5lci5vZmZzZXRXaWR0aCwgY29udGFpbmVyLm9mZnNldEhlaWdodCk7CiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyZW5kZXJlci5kb21FbGVtZW50KTsKICAgICAgcmVuZGVyZXIuc2V0Q2xlYXJDb2xvcigweDAwMDAwMCwgMCk7CiAgICAgIGNvbnN0IGNsb2NrID0gbmV3IFRIUkVFLkNsb2NrKCk7CiAgICAgIHRoaXMuY2xvY2sgPSBjbG9jazsKICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lOwogICAgICB0aGlzLmNhbWVyYSA9IGNhbWVyYTsKICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyOwogICAgfSwKICAgIGFkZExpZ2h0OiBmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBzY2VuZQogICAgICB9ID0gdGhpczsKICAgICAgY29uc3QgaGVtaUxpZ2h0ID0gbmV3IFRIUkVFLkhlbWlzcGhlcmVMaWdodCgweGZmZmZmZiwgMHg0NDQ0NDQpOwogICAgICBoZW1pTGlnaHQucG9zaXRpb24uc2V0KDAsIDEwMDAsIDApOwogICAgICBzY2VuZS5hZGQoaGVtaUxpZ2h0KTsKICAgICAgY29uc3QgZGlyTGlnaHQgPSBuZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCgweGZmZmZmZiwgMC44KTsKICAgICAgZGlyTGlnaHQucG9zaXRpb24uc2V0KC0zMDAwLCAxMDAwLCAtMTAwMCk7CiAgICAgIHNjZW5lLmFkZChkaXJMaWdodCk7CiAgICB9LAogICAgYWRkQmFja1JvY2tzOiBmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBzY2VuZQogICAgICB9ID0gdGhpczsKICAgICAgY29uc3Qgcm9ja3MgPSBuZXcgUm9ja3MoKTsKICAgICAgcm9ja3MuYWRkVG9TY2VuZShzY2VuZSk7CiAgICAgIHRoaXMucm9ja3MgPSByb2NrczsKICAgIH0sCiAgICBhZGRNb2RlbHM6IGZ1bmN0aW9uICgpIHsKICAgICAgbGV0IHsKICAgICAgICBzY2VuZQogICAgICB9ID0gdGhpczsgLy/lr7zlhaVvYmrmqKHlnosKCiAgICAgIHZhciBvYmpMb2FkZXIgPSBuZXcgT0JKTG9hZGVyKCk7CiAgICAgIG9iakxvYWRlci5sb2FkKCIuLi9tb2RlbHMvUGxhbmUub2JqIiwgZnVuY3Rpb24gKG9iamVjdCkgewogICAgICAgIGNvbnNvbGUubG9nKG9iamVjdCk7IC8v6K6+572u5qih5Z6L57yp5pS+5q+U5L6LCgogICAgICAgIG9iamVjdC5zY2FsZS5zZXQoMTAsIDEwLCAxMCk7IC8v6K6+572u5qih5Z6L55qE5Z2Q5qCHCgogICAgICAgIG9iamVjdC5wb3NpdGlvbi5zZXQoMCwgMCwgMCk7CiAgICAgICAgb2JqZWN0LnRyYXZlcnNlKGZ1bmN0aW9uIChjaGlsZCkgewogICAgICAgICAgaWYgKGNoaWxkIGluc3RhbmNlb2YgVEhSRUUuTWVzaCkgewogICAgICAgICAgICAvL+iuvue9ruaooeWei+earuiCpAogICAgICAgICAgICBjaGlsZC5tYXRlcmlhbC5tYXAgPSBUSFJFRS5JbWFnZVV0aWxzLmxvYWRUZXh0dXJlKCIuLi9tb2RlbHMvSmV0X0Jhc2VDb2xvci5wbmciKTsKICAgICAgICAgIH0KICAgICAgICB9KTsgLy/lsIbmqKHlnovmt7vliqDliLDlnLrmma/kuK0KCiAgICAgICAgc2NlbmUuYWRkKG9iamVjdCk7CiAgICAgIH0pOwogICAgfSwKICAgIGFkZEFsYnVtOiBmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBzY2VuZSwKICAgICAgICBjYW1lcmEsCiAgICAgICAgcmVuZGVyZXIKICAgICAgfSA9IHRoaXM7CiAgICAgIGNvbnN0IGFsYnVtID0gbmV3IEFsYnVtKHsKICAgICAgICBjYW1lcmEsCiAgICAgICAgcmVuZGVyZXIKICAgICAgfSk7CiAgICAgIGFsYnVtLmFkZFRvU2NlbmUoc2NlbmUpOwogICAgICB0aGlzLmFsYnVtID0gYWxidW07CiAgICB9LAogICAgYWRkTW91c2VBbmRFZmZlY3Q6IGZ1bmN0aW9uICgpIHsKICAgICAgY29uc3QgewogICAgICAgIHNjZW5lLAogICAgICAgIHJlbmRlcmVyLAogICAgICAgIGNhbWVyYSwKICAgICAgICBhbGJ1bQogICAgICB9ID0gdGhpczsKICAgICAgY29uc3QgZm9sbG93ID0gbmV3IEZvbGxvd0VmZmVjdCh7CiAgICAgICAgdGV4dHVyZSwKICAgICAgICByZW5kZXJlciwKICAgICAgICBjYW1lcmEsCiAgICAgICAgc2NlbmUKICAgICAgfSk7CiAgICAgIG5ldyBNb3VzZSh7CiAgICAgICAgZGlzcGxheTogYWxidW0uZGlzcGxheSwKICAgICAgICBjYW1lcmEsCiAgICAgICAgcmVuZGVyZXIKICAgICAgfSk7CiAgICAgIHRoaXMuZm9sbG93ID0gZm9sbG93OwogICAgfSwKICAgIHJlbmRlcjogZnVuY3Rpb24gKCkgewogICAgICBjb25zdCB7CiAgICAgICAgcmVuZGVyZXIsCiAgICAgICAgc2NlbmUsCiAgICAgICAgY2FtZXJhLAogICAgICAgIHJvY2tzLAogICAgICAgIGNsb2NrLAogICAgICAgIGZvbGxvdwogICAgICB9ID0gdGhpczsKICAgICAgdmFyIGNvbnRyb2xzID0gbmV3IFRyYWNrYmFsbENvbnRyb2xzKGNhbWVyYSwgcmVuZGVyZXIuZG9tRWxlbWVudCk7IC8vIC8vIOS9v+WKqOeUu+W+queOr+S9v+eUqOaXtumYu+WwvOaIluiHqui9rCDmhI/mgJ3mmK/lkKbmnInmg6/mgKcKCiAgICAgIGNvbnRyb2xzLnJvdGF0ZVNwZWVkID0gMC4xOyAvLyDml4vovazpgJ/luqYKCiAgICAgIGNvbnRyb2xzLnpvb21TcGVlZCA9IDAuMTsgLy8g57yp5pS+6YCf5bqmCgogICAgICBjb250cm9scy5taW5EaXN0YW5jZSA9IDIwMDsgLy/nvKnmlL7nmoTmnIDov5Hot53nprsKCiAgICAgIGNvbnRyb2xzLm1heERpc3RhbmNlID0gODAwOyAvL+e8qeaUvueahOacgOi/nOi3neemuwoKICAgICAgY29udHJvbHMucGFuU3BlZWQgPSAwLjE7IC8vIOW5s2NvbnRyb2xzCgogICAgICBjb250cm9scy51cGRhdGUoKTsKICAgICAgZm9sbG93LnJlbmRlcigpOwogICAgICByb2Nrcy5yZW5kZXIoY2xvY2spOwogICAgICByZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;AAKA,+B,CACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACAA,eADA;;AAEAC;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACAC;AACA,GAbA;;AAcAC;AACAD;AACA,GAhBA;;AAkBAE;AACAC;AACA;AACA,iDACA,EADA,EAEAC,8CAFA,EAGA,CAHA,EAIA,IAJA;AAOAC;AAEA;AACA;AAAAC;AAAA;AACAC;AACAA;AACAH;AACAG;AACA;AAEA;AACA;AACA;AACA;AACA,KAxBA;AA0BAC;AACA;AAAAC;AAAA;AAEA;AACAC;AACAD;AAEA;AACAE;AACAF;AACA,KApCA;AAsCAG;AACA;AAAAH;AAAA;AACA;AACAI;AACA;AACA,KA3CA;AA6CAC;AACA;AAAAL;AAAA,eADA,CAEA;;AACA;AACAM;AACAC,4BADA,CAEA;;AACAC,qCAHA,CAIA;;AACAA;AAEAA;AACA;AACA;AACAC,8DACA,6BADA;AAGA;AACA,SAPA,EAPA,CAeA;;AACAT;AACA,OAjBA;AAkBA,KAnEA;AAqEAU;AACA;AAAAV;AAAAJ;AAAAE;AAAA;AACA;AAAAF;AAAAE;AAAA;AACAa;AACA;AACA,KA1EA;AA4EAC;AACA;AAAAZ;AAAAF;AAAAF;AAAAe;AAAA;AACA;AACAE,eADA;AAEAf,gBAFA;AAGAF,cAHA;AAIAI;AAJA;AAOA;AAAAc;AAAAlB;AAAAE;AAAA;AAEA;AACA,KAxFA;AA0FAiB;AACA;AAAAjB;AAAAE;AAAAJ;AAAAQ;AAAAY;AAAAC;AAAA;AACA,wEAFA,CAGA;;AACAC,iCAJA,CAIA;;AACAA,+BALA,CAKA;;AACAA,iCANA,CAMA;;AACAA,iCAPA,CAOA;;AACAA,8BARA,CAQA;;AACAA;AACAD;AACAb;AACAN;AACA;AAvGA;AAlBA","names":["name","mounted","RAFManager","destroyed","methods","initThree","container","camera","alpha","renderer","addLight","scene","hemiLight","dirLight","addBackRocks","rocks","addModels","objLoader","console","object","child","addAlbum","album","addMouseAndEffect","texture","display","render","clock","follow","controls"],"sourceRoot":"src/components","sources":["World.vue"],"sourcesContent":["<template>\r\n  <div class=\"world\" ref=\"container\"></div>\r\n</template>\r\n\r\n<script>\r\nimport * as THREE from \"three\";\r\n// import { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\nimport { OBJLoader } from \"three/examples/jsm/loaders/OBJLoader\";\r\nimport { TrackballControls } from \"three/examples/jsm/controls/TrackballControls\";\r\nimport RAFManager from \"raf-manager\";\r\nimport Rocks from \"./Rocks\";\r\nimport Album from \"./Album\";\r\nimport Mouse from \"./Mouse\";\r\nimport FollowEffect from \"./FollowEffect\";\r\nimport texture from \"../assets/dot.png\";\r\n\r\nexport default {\r\n  name: \"World\",\r\n  mounted() {\r\n    this.initThree();\r\n    this.addLight();\r\n    this.addBackRocks();\r\n    this.addAlbum();\r\n    this.addMouseAndEffect();\r\n\r\n    this.addModels();\r\n\r\n    this.render = this.render.bind(this);\r\n    RAFManager.add(this.render);\r\n  },\r\n  destroyed() {\r\n    RAFManager.remove(this.render);\r\n  },\r\n\r\n  methods: {\r\n    initThree: function () {\r\n      const container = this.$refs.container;\r\n      const camera = new THREE.PerspectiveCamera(\r\n        45,\r\n        container.offsetWidth / container.offsetHeight,\r\n        1,\r\n        3000\r\n      );\r\n\r\n      camera.position.set(0, 0, 500);\r\n\r\n      const scene = new THREE.Scene();\r\n      const renderer = new THREE.WebGLRenderer({ alpha: true });\r\n      renderer.setPixelRatio(window.devicePixelRatio);\r\n      renderer.setSize(container.offsetWidth, container.offsetHeight);\r\n      container.appendChild(renderer.domElement);\r\n      renderer.setClearColor(0x000000, 0);\r\n      const clock = new THREE.Clock();\r\n\r\n      this.clock = clock;\r\n      this.scene = scene;\r\n      this.camera = camera;\r\n      this.renderer = renderer;\r\n    },\r\n\r\n    addLight: function () {\r\n      const { scene } = this;\r\n\r\n      const hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444);\r\n      hemiLight.position.set(0, 1000, 0);\r\n      scene.add(hemiLight);\r\n\r\n      const dirLight = new THREE.DirectionalLight(0xffffff, 0.8);\r\n      dirLight.position.set(-3000, 1000, -1000);\r\n      scene.add(dirLight);\r\n    },\r\n\r\n    addBackRocks: function () {\r\n      const { scene } = this;\r\n      const rocks = new Rocks();\r\n      rocks.addToScene(scene);\r\n      this.rocks = rocks;\r\n    },\r\n\r\n    addModels: function () {\r\n      let { scene } = this;\r\n      //导入obj模型\r\n      var objLoader = new OBJLoader();\r\n      objLoader.load(\"../models/Plane.obj\", function (object) {\r\n        console.log(object);\r\n        //设置模型缩放比例\r\n        object.scale.set(10, 10, 10);\r\n        //设置模型的坐标\r\n        object.position.set(0, 0, 0);\r\n\r\n        object.traverse(function (child) {\r\n          if (child instanceof THREE.Mesh) {\r\n            //设置模型皮肤\r\n            child.material.map = THREE.ImageUtils.loadTexture(\r\n              \"../models/Jet_BaseColor.png\"\r\n            );\r\n          }\r\n        });\r\n        //将模型添加到场景中\r\n        scene.add(object);\r\n      });\r\n    },\r\n\r\n    addAlbum: function () {\r\n      const { scene, camera, renderer } = this;\r\n      const album = new Album({ camera, renderer });\r\n      album.addToScene(scene);\r\n      this.album = album;\r\n    },\r\n\r\n    addMouseAndEffect: function () {\r\n      const { scene, renderer, camera, album } = this;\r\n      const follow = new FollowEffect({\r\n        texture,\r\n        renderer,\r\n        camera,\r\n        scene,\r\n      });\r\n\r\n      new Mouse({ display: album.display, camera, renderer });\r\n\r\n      this.follow = follow;\r\n    },\r\n\r\n    render: function () {\r\n      const { renderer, scene, camera, rocks, clock, follow } = this;\r\n      var controls = new TrackballControls(camera, renderer.domElement);\r\n      // // 使动画循环使用时阻尼或自转 意思是否有惯性\r\n      controls.rotateSpeed = 0.1; // 旋转速度\r\n      controls.zoomSpeed = 0.1; // 缩放速度\r\n      controls.minDistance = 200; //缩放的最近距离\r\n      controls.maxDistance = 800; //缩放的最远距离\r\n      controls.panSpeed = 0.1; // 平controls\r\n      controls.update();\r\n      follow.render();\r\n      rocks.render(clock);\r\n      renderer.render(scene, camera);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n.world {\r\n  position: absolute;\r\n  bottom: 0;\r\n  margin: 0;\r\n  padding: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #161616;\r\n  background-image: radial-gradient(#161616, #000);\r\n}\r\n</style>\r\n"]}]}