(function(e){function t(t){for(var a,r,s=t[0],d=t[1],c=t[2],h=0,p=[];h<s.length;h++)r=s[h],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&p.push(i[r][0]),i[r]=0;for(a in d)Object.prototype.hasOwnProperty.call(d,a)&&(e[a]=d[a]);l&&l(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,s=1;s<n.length;s++){var d=n[s];0!==i[d]&&(a=!1)}a&&(o.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},i={app:0},o=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=d;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"21e5":function(e,t,n){"use strict";n("c321")},"21fb":function(e,t,n){e.exports=n.p+"3d2/img/04.2ee2ab82.jpg"},"36e0":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAJkSURBVHjaxJeJbusgEEW94S1L//83X18M2MSuLd2pbqc4wZGqRLrKBsyZhQHny7Jk73xVL8xpVhWrcmiB5lX+6GJ5YgQ2owbAm8oIwH1VgKZUmGcRqKGGPgtEQQAzGR8hQ59fAmhJHSAagigJ4E7GPWRXOYC6owAd1JM6wDQPADyMWUqZRMqmAojHp1Vn6EQQEgUNMJLnUjMyJsM49wygBkAPw9dVFwXRkncCIIW3GRgoTQUZn6HxCMAFEFd8TwEQ78X4rHbILoAUmeT+RFG4UhQ6MiIAE4W/UsYFjuVjAIa2nIY4q1R0GFtQWG3E84lqw2GO2QOoCKBVu0BAPgDSU0eUDjjQenNkV/AW/pWChhpMTelo1a64AOKM30vk18GzTHXCNtI/Knz3DFBgsUqBGIjTInXRY1yA9xkVoqW5tVq3pDR9A0hfF5BSARmVnh7RMDCaIdcNgbPBkgzn1Bu+SfIEFSpSBmkxyrMicb0fAEuCZrWnN89veA/4XcakrPcjBWzkTuLjlbfTQPOlBhz+HwkqqPXmPQDdrQItxE1moGof1S74j/8txk8EHhTQrAE8qlwfqS5yukm1x/rAJ9Jiaa6nyATqD78aUVBhFo8b1V4DdTXdCW+IxA1zB4JhiOhZMEWO1HqnvdoHZ4FAMIhV9REF8FiUm0jsYPEJx/Fm/N8OhH90HI9YRHesWbXXZwAShU8qThe7H8YAuJmw5yOd989uRINKRTJAhoF8jbqrHKfeCYdIISZfSq26bk/K+yO3YvfKrVgiwQBHnwt8ynPB25+M8hceTt/ybPhnryJ78+tLgAEAuCFyiQgQB30AAAAASUVORK5CYII="},"3c78":function(e,t,n){e.exports=n.p+"3d2/img/05.3575fef2.jpg"},"56d7":function(e,t,n){"use strict";n.r(t);var a=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e._m(0),n("World")],1)},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"logo"},[a("img",{attrs:{src:n("cf05")}}),a("span",[e._v("深圳市民治中学")])])}],r=n("2411"),s=n.n(r),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"container",staticClass:"world"})},c=[],l=n("5a89"),h=n("e642"),p=n("920c"),f=n("b4e7"),u=n.n(f);class m{constructor(){this.init()}init(){const e=new l["Group"],t=new l["TetrahedronBufferGeometry"](5),n=new l["MeshStandardMaterial"]({color:3158064,flatShading:!0});for(let a=0;a<80;a++){const a=new l["Mesh"](t,n);a.position.x=500*Math.random()-250,a.position.y=500*Math.random()-250,a.position.z=500*Math.random()-250,a.scale.setScalar(2*Math.random()+.5),a.rotation.x=Math.random()*Math.PI,a.rotation.y=Math.random()*Math.PI,a.rotation.z=Math.random()*Math.PI,e.add(a)}this.display=e}addToScene(e){e.add(this.display)}render(e){const{display:t}=this;t.rotation.y+=.1*e.getDelta()}}var w=n("a94b"),g=n.n(w),y=n("cffa"),M=n("62d6");class A{constructor(e){this.init(e)}init(e){this.width=1003/1.5,this.height=376;const t=(new l["TextureLoader"]).load(e),n=new l["Mesh"](new l["PlaneGeometry"](this.width,this.height,12,12,!0),new l["MeshBasicMaterial"]({map:t,side:l["DoubleSide"]}));this.addModifier(n),this.display=n,s.a.on("MENU_CLICK",this.changeModifier.bind(this))}show(){const{display:e}=this,t={duration:.7,ease:"back.out"};y["a"].to(e.scale,{x:1,y:1,...t}),y["a"].to(e.position,{x:e.to.x,y:e.to.y,z:e.to.z,...t}),this.animateModifier(t)}hide(){const{display:e}=this,t={duration:.6,ease:"back.out"};y["a"].to(e.scale,{x:e.fromScale,y:e.fromScale,...t}),y["a"].to(e.position,{x:e.from.x,y:e.from.y,z:e.from.z,...t})}addModifier(e){const t=new M["ModifierStack"](e);this.modifier=t,this.changeModifier("Twist")}changeModifier(e){const{modifier:t,currentModifier:n}=this;switch(t.removeModifier(n),t.reset(),this.type=e,e){case"Twist":{const e=new M["Twist"](2);e.vector=new M["Vector3"](0,1,0),this.currentModifier=e,t.addModifier(e);break}case"Noise":{const e=new M["Noise"](0);e.frc=15,this.currentModifier=e,t.addModifier(e);break}case"Bend":{const e=new M["Bend"](1.2,.3,1);e.constraint=M["ModConstant"].LEFT,this.currentModifier=e,t.addModifier(e);break}case"Custom":{const e=new M["UserDefined"];e.angle=0,e.renderVector=(t,n,a)=>{const{angle:i}=e;let o=Math.abs(a/2-n)/(a/2);o=n%4===0?-.6*o:o,o=Math.min(o,1);const r=150;t.x+=r*Math.sin(i)*o,t.y+=r*Math.cos(i+Math.PI/2)*o},this.currentModifier=e,t.addModifier(e);break}default:break}}animateModifier(e){const{modifier:t,currentModifier:n,type:a}=this;switch(a){case"Twist":y["a"].fromTo(n,{angle:g.a.randomA2B(-2,-.5)*Math.PI},{angle:0,...e,onUpdate:()=>t.apply()});break;case"Noise":y["a"].fromTo(n,{frc:200},{frc:0,...e,onUpdate:()=>t.apply()});break;case"Bend":y["a"].fromTo(n,{force:6,angle:0},{force:0,angle:2,...e,ease:"cubic.out",onUpdate:()=>t.apply()});break;case"Custom":y["a"].fromTo(n,{angle:Math.PI},{angle:0,...e,ease:"cubic.out",onUpdate:()=>t.apply()});break;default:break}}addToScene(e){e.add(this.display)}}var b={getRealSizePos({camera:e,renderer:t}){const n=t.getSize().height,a=e.fov*Math.PI/180,i=n/(2*Math.tan(a/2));return e.position.z-i},scale(e,t){e.scale.x=t,e.scale.y=t}},S=n("e4de"),v=n.n(S),x=n("70dc"),k=n.n(x),T=n("ace0"),B=n.n(T),C=n("21fb"),I=n.n(C),E=n("3c78"),R=n.n(E),j=n("f763"),P=n.n(j);const U=[v.a,k.a,B.a,I.a,R.a,P.a];class L{constructor(e){this.init(e),this.addListener()}init({camera:e,renderer:t}){const n=new l["Group"],a=.25,i=6,o=[];for(let r=0;r<i;r++){const s=new A(U[r]),d=b.getRealSizePos({camera:e,renderer:t}),c=18,h=s.width*a+c,p=s.height*a+1.6*c;s.display.position.x=r%(i/2)*h-h,s.display.position.y=p/2-g.a.floor(r/(i/2),0)*p,s.display.position.z=d-300,s.display.from=s.display.position.clone(),s.display.to=new l["Vector3"](0,0,d),s.display.fromScale=a,b.scale(s.display,a),n.add(s.display),o.push(s)}this.list=o,this.display=n}addListener(){const{list:e}=this;s.a.on("CLICK",t=>{for(let n=0;n<e.length;n++){const a=e[n];a.display===t&&(t.show?a.show():a.hide())}})}addToScene(e){e.add(this.display)}render(){}}class z{constructor(e){this.init(e),this.addMouseEvent()}init({display:e,camera:t,renderer:n}){const a=new l["Vector2"],i=new l["Raycaster"];this.raycaster=i,this.renderer=n,this.display=e,this.camera=t,this.mouse=a}addMouseEvent(){this.onClick=this.onClick.bind(this),document.addEventListener("touchend",this.onClick,!0)}onClick(e){e.preventDefault();const{mouse:t,renderer:n}=this,a=n.domElement,i=n.getPixelRatio(),o=a.getBoundingClientRect();let r=e.changedTouches[0].clientX-o.left,s=e.changedTouches[0].clientY-o.top;r*=i,s*=i,t.x=r/a.width*2-1,t.y=-s/a.height*2+1,this.render()}render(){const{raycaster:e,display:t,camera:n,mouse:a}=this;e.setFromCamera(a,n);const i=e.intersectObjects(t.children);if(i.length>0){const e=i[0].object;e.show=!e.show,s.a.emit("CLICK",e)}}destroy(){document.removeEventListener("touchend",this.onClick,!0)}}var F=n("beed"),O=n.n(F);class V{constructor(e){this.init(e)}init({texture:e,camera:t,renderer:n,scene:a}){const i=new O.a,o=new O.a.FollowEmitter;o.ease=1,o.rate=new O.a.Rate(new O.a.Span(4,5),new O.a.Span(.01,.02)),o.addInitialize(new O.a.Mass(1)),o.addInitialize(new O.a.Life(.7)),o.addInitialize(new O.a.Body(this.createSprite(e))),o.addInitialize(new O.a.Radius(20)),o.addInitialize(new O.a.V(200,new O.a.Vector3D(0,0,-1),15)),o.addBehaviour(new O.a.Alpha(.8,0)),o.addBehaviour(new O.a.Color("#4F1500","#0029FF")),o.addBehaviour(new O.a.Scale(1,.5)),o.addBehaviour(new O.a.CrossZone(new O.a.ScreenZone(t,n),"dead")),o.setCameraAndRenderer(t,n),o.emit(),i.addEmitter(o),i.addRender(new O.a.SpriteRender(a)),this.proton=i}createSprite(e){const t=(new l["TextureLoader"]).load(e),n=new l["SpriteMaterial"]({map:t,color:16711680,blending:l["AdditiveBlending"],fog:!0});return new l["Sprite"](n)}addToScene(e){e.add(this.plane)}render(){const{proton:e}=this;e.update()}}var W=n("36e0"),G=n.n(W),H={name:"World",mounted(){this.initThree(),this.addLight(),this.addBackRocks(),this.addAlbum(),this.addMouseAndEffect(),this.addModels(),this.render=this.render.bind(this),u.a.add(this.render)},destroyed(){u.a.remove(this.render)},methods:{initThree:function(){const e=this.$refs.container,t=new l["PerspectiveCamera"](45,e.offsetWidth/e.offsetHeight,1,1e4);t.position.set(0,0,500);const n=new l["Scene"],a=new l["WebGLRenderer"]({alpha:!0});a.setPixelRatio(window.devicePixelRatio),a.setSize(e.offsetWidth,e.offsetHeight),e.appendChild(a.domElement),a.setClearColor(0,0);const i=new l["Clock"];var o=new l["SphereBufferGeometry"](5e3,60,600);o.scale(-1,-1,-1),o.rotateX(60),o.rotateY(10);var r=(new l["TextureLoader"]).load("/3d2/models/360_world.jpg");r.minFilter=l["LinearFilter"],r.format=l["RGBFormat"];var s=new l["MeshBasicMaterial"];s.map=r;var d=new l["Mesh"](o,s);n.add(d);const c=new p["a"](t,a.domElement);c.rotateSpeed=.1,c.zoomSpeed=.1,c.minDistance=200,c.maxDistance=5e3,c.panSpeed=.1,this.controls=c,this.clock=i,this.scene=n,this.camera=t,this.renderer=a},addLight:function(){const{scene:e}=this,t=new l["HemisphereLight"](16777215,4473924);t.position.set(0,1e3,0),e.add(t);const n=new l["DirectionalLight"](16777215,.8);n.position.set(-3e3,1e3,-1e3),e.add(n)},addBackRocks:function(){const{scene:e}=this,t=new m;t.addToScene(e),this.rocks=t},addModels:function(){let{scene:e}=this;var t=new h["a"];t.load("/3d2/models/Satellite.obj",(function(t){console.log(t),t.scale.set(30,30,30),t.position.set(0,300,-1e3),t.rotation.set(0,.1*-Math.PI,0),t.traverse((function(e){e instanceof l["Mesh"]&&(e.material.map=l["ImageUtils"].loadTexture("/3d2/models/satellite_Satélite_Metallic.jpg"))})),e.add(t)}))},addAlbum:function(){const{scene:e,camera:t,renderer:n}=this,a=new L({camera:t,renderer:n});a.addToScene(e),this.album=a},addMouseAndEffect:function(){const{scene:e,renderer:t,camera:n,album:a}=this,i=new V({texture:G.a,renderer:t,camera:n,scene:e});new z({display:a.display,camera:n,renderer:t}),this.follow=i},render:function(){const{renderer:e,camera:t,scene:n,rocks:a,clock:i,follow:o,controls:r}=this;r.update(),o.render(),a.render(i),e.render(n,t)}}},Q=H,J=(n("21e5"),n("2877")),q=Object(J["a"])(Q,d,c,!1,null,"003f8d1a",null),_=q.exports,D={name:"App",components:{World:_},methods:{click:function(e){s.a.emit("MENU_CLICK",e)}}},K=D,X=(n("034f"),Object(J["a"])(K,i,o,!1,null,null,null)),Y=X.exports;a["a"].config.productionTip=!1,new a["a"]({render:e=>e(Y)}).$mount("#app")},"70dc":function(e,t,n){e.exports=n.p+"3d2/img/02.b44ee33c.jpg"},"85ec":function(e,t,n){},ace0:function(e,t,n){e.exports=n.p+"3d2/img/03.dc35d70f.jpg"},c321:function(e,t,n){},cf05:function(e,t,n){e.exports=n.p+"3d2/img/logo.681c2ea9.png"},e4de:function(e,t,n){e.exports=n.p+"3d2/img/01.a46cb708.jpg"},f763:function(e,t,n){e.exports=n.p+"3d2/img/06.1e48e57b.jpg"}});
//# sourceMappingURL=app.5546e611.js.map